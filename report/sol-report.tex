%%Author: Javangers Team

\documentclass[letterpaper,12pt]{report}

%% page layouts
\usepackage[margin=0.8in]{geometry}

%% appendices
\usepackage[toc,page]{appendix}

%enumitem to itemize nicely
\usepackage{enumitem}

%source code highlighting
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{xcolor}

\definecolor{lightgray}{rgb}{.95,.95,.95}

% gnu make listing
\lstdefinestyle{bash}{
   language=bash,
   keywordstyle=\bfseries\color{green!40!black},
   commentstyle=\itshape\color{purple!40!black},
   identifierstyle=\color{blue},
   extendedchars=true,
   basicstyle=\ttfamily,
   showstringspaces=false,
   showspaces=false,
   breaklines=true,
   showtabs=false,
   frame=single,
   stringstyle=\color{red},
   backgroundcolor=\color{lightgray},
   autogobble=true,
   aboveskip=-4pt
}

% gnu make listing
\lstdefinestyle{make}{
   language=[gnu]make,
   keywordstyle=\bfseries\color{green!40!black},
   commentstyle=\itshape\color{purple!40!black},
   identifierstyle=\color{blue},
   extendedchars=true,
   basicstyle=\ttfamily,
   showstringspaces=false,
   showspaces=false,
   breaklines=true,
   showtabs=false,
   frame=single,
   stringstyle=\color{red},
   backgroundcolor=\color{lightgray},
   autogobble=true,
   aboveskip=-4pt
}

% ocaml listing
\lstdefinestyle{caml}{
   language=[Objective]Caml,
   keywordstyle=\bfseries\color{green!40!black},
   commentstyle=\itshape\color{purple!40!black},
   identifierstyle=\color{blue},
   extendedchars=true,
   basicstyle=\ttfamily,
   showstringspaces=false,
   showspaces=false,
   breaklines=true,
   showtabs=false,
   frame=single,
   stringstyle=\color{red},
   backgroundcolor=\color{lightgray},
   autogobble=true,
   aboveskip=-4pt
}

% settings for SOL code listings
\lstdefinestyle{sol}{
   language=Java,
   morekeywords={func, construct, shape, string},
   keywordstyle=\bfseries\color{green!40!black},
   commentstyle=\itshape\color{purple!40!black},
   identifierstyle=\color{blue},
   extendedchars=true,
   basicstyle=\ttfamily,
   showstringspaces=false,
   showspaces=false,
   breaklines=true,
   showtabs=false,
   frame=single,
   stringstyle=\color{red},
   backgroundcolor=\color{lightgray},
   autogobble=true,
   aboveskip=-10pt
}

\begin{document}

%% Title, authors and addresses
\title{{\small better call} {\Huge \textbf{SOL}}\\
    \begin{center}{SHAPE ORIENTED LANGUAGE FINAL REPORT}\end{center}
}

\author{
\begin{tabular}{ lc lc lc }
Aditya Narayanamoorthy & \texttt{an2753}  & \textit{Language Guru}    \\
Erik Dyer              & \texttt{ead2174} & \textit{System Architect} \\
Gergana Alteva         & \texttt{gla2112} & \textit{Program Manager}  \\
Kunal Baweja           & \texttt{kb2896}  & \textit{Tester}
\end{tabular}
}

%% Generate the title
\maketitle

%% Table of contents
\tableofcontents{}

\chapter{Introduction}


\chapter{Language Reference Manual}

%% include the common content for lrm
\input{../lrm/sol-lrm-content.tex}

% Appendix code listings
\begin{appendices}

\chapter{SOL Compiler}

Code listing for compiler code. Author names are mentioned as first comment line of each code listing.

    \section{scanner.mll}
    \lstinputlisting[style=caml]{../scanner.mll}

    \section{parser.mly}
    \lstinputlisting[style=caml]{../parser.mly}

    \section{ast.ml}
    \lstinputlisting[style=caml]{../ast.ml}

    \section{semant.ml}
    \lstinputlisting[style=caml]{../semant.ml}

    \section{sast.ml}
    \lstinputlisting[style=caml]{../sast.ml}

    \section{codegen.ml}
    \lstinputlisting[style=caml]{../codegen.ml}

    \section{sol.ml}
    \lstinputlisting[style=caml]{../codegen.ml}

    \section{predefined.h}
    \lstinputlisting[style=caml]{../predefined.h}

    \section{predefined.c}
    \lstinputlisting[style=caml]{../predefined.c}

    \section{Makefile}
    \lstinputlisting[style=make]{../Makefile}


\chapter{Environment Setup}

The following scripts can be used for installing dependencies and setting up environment.

    \section{install-llvm.sh}
    \lstinputlisting[style=bash]{../install-llvm.sh}

    \section{install-sdl-gfx.sh}
    \lstinputlisting[style=bash]{../install-sdl-gfx.sh}

\chapter{Automated testing}\label{test-suite}

The first two scripts are used for automated testing on Travis CI. For individual test cases, the author names are mentioned as first line of each test case.

    \section{.travis.yml}
    \lstinputlisting[style=bash]{../.travis.yml}

    \section{testall.sh}
    \lstinputlisting[style=bash]{../testall.sh}

    %% include latest set of automated test files
    %% use g.py scrip to generate the test-case.tex
    %% recompile the latex document
    \input{test-cases.tex}

\end{appendices}

\end{document}
